<ul class="tree">
  <ng-container *ngFor="let node of tree$">

    <ng-container [ngTemplateOutlet]="renderNode" [ngTemplateOutletContext]="{node: node, level: 0}"></ng-container>
  </ng-container>
</ul>

<ng-template #renderNode let-node="node" let-level="level">
  <li [style.paddingLeft.px]="level * 12" [class.selected]="node.id === selectedId">
    <span *ngIf="node.kind==='file'" (click)="toggle(node)">ðŸ“„</span>
    <span class="name" (dblclick)="node.kind==='file' && rename.emit({id: node.id, name: node.name})">
      <button *ngIf="node.kind==='folder'" (click)="toggle(node)">

        <mat-icon  role="img" class="mat-icon notranslate material-icons mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font">
          {{ expanded.has(node.id) ? 'folder_open' : 'folder' }}
        </mat-icon>


      
    </button>
      {{ node.name }}
    </span>
    <button *ngIf="node.kind==='folder'" (click)="createFile.emit({ parentId: node.id })">ï¼‹</button>
  </li>

  <ul *ngIf="node.children?.length && expanded.has(node.id)">
    <ng-container *ngFor="let child of node.children">
      <ng-container [ngTemplateOutlet]="renderNode" [ngTemplateOutletContext]="{node: child, level: level + 1}"></ng-container>
    </ng-container>
  </ul>
</ng-template>
